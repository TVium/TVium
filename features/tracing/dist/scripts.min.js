var Trace=function(){var e=new TraceRequests,t=this,n={};this.configure=function(e){n=e},this.getConfiguration=function(){return n},this.startHeartbeat=function(){-1!=t.getConfiguration().HEARTBEAT_TIME_INTERVAL&&setInterval(function(){try{e.heartbeat()}catch(e){logManager.error(e.message)}},t.getConfiguration().HEARTBEAT_TIME_INTERVAL)},this.injectTrackingPixel=function(e){$("#trackingPixel").remove();var t=document.createElement("img");t.setAttribute("id","trackingPixel"),t.src=escapeXml(e),t.setAttribute("alt",escapeXml(e)),document.getElementsByClassName("tvium-container")[0].appendChild(t)}},TraceRequests=function(){this.heartbeat=function(){var t="TraceRequests.heartbeat()",e="",n="";serviceManager.getCurrentChannel()?(e=serviceManager.getCurrentChannel().getChannelToString(),consent&&null!=consent.getModel()&&null!=consent.getModel().tvId&&(n=consent.getModel().tvId),n=JSON.stringify({tvId:n,triplet:e,timestamp:(new Date).getTime().toString()}),logManager.log(t+" - payload heartbeat: "+n),(e=trace.getConfiguration().HEARTBEAT_URL)&&""!==e&&$.ajax({type:"POST",url:e,data:n,timeout:trace.getConfiguration().HEARTBEAT_TIME_INTERVAL,success:function(e){logManager.log(t+" - Response: "+JSON.stringify(e))},error:function(e){logManager.error(t+" - Error:"+JSON.stringify(e))}})):logManager.error(t+" - currentChannel is not set")}};