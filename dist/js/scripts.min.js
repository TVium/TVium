var Constants={VERSION:"0.1.0"},app=null,logManager=null,konamiManager=null,serviceManager=null,mediaSyncManager=null,trace=null,consent=null,core=null,storageManager=null,labelsManager=null,featuresManager=null,keyset=null,trackingConsent=null,yellowButtonEnabled=!1,streamEvent=null,adv=null,banner=null,activeContext=null;window.onload=function(){try{(logManager=new LogManager).generalLog("User Agent - "+navigator.userAgent),logManager.generalLog("App Host - "+window.location.host);try{var e=document.getElementById("appMan");(app=e.getOwnerApplication(document)).show(),keyset=app.privateData.keyset}catch(e){logManager.generalError(e.message)}try{(core=new Core).configure({ENABLE_LOGS:!1,FEATURES_FILE:"config/features/features_stag.json",LANG_FOLDER:"config/languages",LANGUAGE:"fr",COOKIES_MONTHS_DURATION:6,MODEL_COOKIE_NAME:"appData",CONSENT_BANNER_DISPLAY_TIME:1e4,CONSENT_CONFIRMATION_DISPLAY_TIME:5e3}),core.initPlatformData(),logManager.generalLog("HbbTvVersion: "+core.getPlatform().hbbtvversion+" - Brand: "+core.getPlatform().brand+" - Model: "+core.getPlatform().model),(featuresManager=new FeaturesManager).loadFeaturesConfiguration(function(){(serviceManager=new ServiceManager).initialize(),mediaSyncManager=new MediaSyncManager,featuresManager.getFeature("PTSMethod")&&mediaSyncManager.init(),(labelsManager=new LabelsManager).init(),(trace=new Trace).configure({HEARTBEAT_URL:"",HEARTBEAT_TIME_INTERVAL:1e4}),featuresManager.getFeature("periodicHeartbeat")&&trace.startHeartbeat(),storageManager=new StorageManager,logManager.log("getConsent wait-time started"),(consent=new Consent(a,n)).configure({CONSENT_API_ENDPOINT:"./api/consents",PARTNER_API_ENDPOINT:"./api/partners",DUMMY_API:!0,GET_CONSENT_CALL_TIMEOUT:3e4,SET_CONSENT_CALL_TIMEOUT:3e4,TIME_BEFORE_CONSENT_CALL:5e3,MAXIMUM_NUMBER_CONSENTS_RETRIES:"1",CONSENT_DIRECT_DEFAULT_FOCUS:"-1",CONSENT_PARAMETERS_DEFAULT_FOCUS:"0",CONSENT_PRIVACY_DEFAULT_FOCUS:"-1",CONSENT_PARTENAIRES_DEFAULT_FOCUS:"0",DISABLE_PARTNERS:!0}),consent.init(),(banner=new Banner(a,n)).configure({CTS_URL:"../features/banner/assets/banner.png",BANNER_DISPLAY_TIME:4e3,APP_URL:""}),setTimeout(function(){consent.loadConsentData(function(e){consent.consentsDirectValidationOverlayComponent.showConsentDirectValidationOverlay(e)},function(e){streamEvent=new StreamEvent,adv=new Adv,streamEvent.configure({STREAM_EVENT_CONFIGURATION:{"399.5.2":{NAME:"name",DVB_STREAM_EVENTS_OBJECT_NAME:"object_name",DVB_OBJECT_CAROUSEL_COMPONENT_TAG:100,CHANNEL_NAME:"channel_name",XML_STREAM_EVENTS_XML_DEFINITION:"filepath/file.xml"}},TRIGGERABLE_FN_ON_SCTE35_MAP:{16:{FN:function(e,n){logManager.log("triggered function on scte-35 event"),banner.startJourney()},ATTRIBUTES:["pts_time"]}},TRIGGERABLE_FN_ON_EVENT:function(){adv.onFiredAdv()}}),adv.configure({ADSERVER_URL:"",GET_WIZADS_TIMEOUT:1e3,PTS_CHECK_START_TIME:400,PTS_CHECK_INTERVAL_TIME:4,PTS_CHECK_TOLERANCE:40,BLACK_FRAMES_DURATION_AFTER_SPOT:360,VISIBLE_AD_TRACKING:!1,AD_SUBSTITUTION_METHOD:"break",CALL_ADSERVER_FALLBACK_ON_STARTEVENT:!0}),streamEvent.initStreamEventsMethod()})},consent.getConfiguration().TIME_BEFORE_CONSENT_CALL)})}catch(e){logManager.generalError(e.message)}(konamiManager=new KonamiManager).loadKonamis(),n();try{logManager.generalLog("Keyset bound: "+JSON.stringify(keyset,null,4)+" - Example key (yellow button): "+keyset.YELLOW)}catch(e){logManager.generalError("Init Keyset: "+e.message)}}catch(e){logManager.generalError("General Error: "+e.message)}function n(){try{var e=keyset.YELLOW;keyset.setValue(e)}catch(e){logManager.generalError("General Error: "+e.message)}}function a(){try{keyset.setValue(0)}catch(e){logManager.generalError("General Error: "+e.message)}}};